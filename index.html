<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>2026 Wolves U14-2 Girls stats</title>
  <meta property="og:title" content="2026 Wolves U14-2 Girls stats" />
  <meta property="og:description" content="Boxscores, stats and analytics for the 2026 Joondalup Wolves U14-2 Girls." />
  <meta property="og:url" content="https://insideshots23.github.io/14-2_stats_2026/" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root{--green:#164835;--accent:#26a69a;--card-bg:#fff;--muted:#666}
    html,body{height:100%}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial; margin:0; padding:12px; background:var(--green); color:#fff; -webkit-font-smoothing:antialiased}
    .header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:14px}
    .header-group{display:flex;gap:12px;align-items:center}
    .logo{height:60px}
    h1{font-size:20px;margin:0;font-weight:600}
    h2.subtitle{font-size:14px;margin:0;font-weight:400;opacity:.9}
    .nav-menu{position:relative}
    .menu-btn{background:none;border:none;color:#fff;font-size:22px;cursor:pointer;padding:8px 12px;border-radius:6px}
    .menu-content{display:none;position:absolute;right:0;top:40px;background:#fff;color:#333;border-radius:8px;box-shadow:0 8px 24px rgba(0,0,0,.15);min-width:220px;z-index:50;overflow:hidden}
    .menu-content.show{display:block}
    .menu-item{display:block;padding:12px 16px;text-decoration:none;color:#333;font-weight:500}
    .menu-item:hover{background:#f4f4f4}
    .main-view{display:none}
    .main-view.active{display:block}
    /* cards */
    .card{background:var(--card-bg);color:#333;border-radius:10px;padding:14px;box-shadow:0 2px 10px rgba(0,0,0,.08);margin:18px auto;max-width:1000px}
    .card h3{margin:0 0 10px 0;color:var(--green);font-size:18px}
    .loading{text-align:center;color:var(--muted);padding:18px}
    /* tables */
    table{width:100%;border-collapse:collapse;font-size:14px}
    th,td{padding:8px;border-bottom:1px solid #eee;text-align:left}
    th{background:var(--green);color:#fff;font-weight:600;position:relative}
    tbody tr:nth-child(even){background:#fafafa}
    .player-col{min-width:200px}
    .num-cell{text-align:center;width:70px}
    .totals-row{background:#e6f2ed;font-weight:700}
    .definitions{font-size:13px;color:#444}
    .definition-title{color:var(--green);font-weight:700;margin-bottom:6px}
    /* fixture list */
    .season-games{background:#fff;color:#333;border-radius:10px;padding:12px;max-width:820px;margin:12px auto;box-shadow:0 2px 10px rgba(0,0,0,.06)}
    .season-games-title{display:block;text-align:center;color:var(--green);font-weight:700;margin-bottom:12px}
    .game-list{list-style:none;padding-left:12px;margin:0}
    .game-list li{padding:8px;border-bottom:1px solid #eee;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;cursor:default}
    .game-list li.current{font-weight:700;background:#e9f3ef;border-left:4px solid var(--green)}
    /* responsive */
    @media (max-width:720px){.logo{height:48px}.card{padding:10px}.player-col{min-width:120px}}
  </style>
</head>
<body>
  <div class="header">
    <div class="header-group">
      <img class="logo" src="https://sbl.asn.au/wp-content/uploads/sites/2/2020/07/JoondalupWolves-Primary-Logo.png" alt="Wolves logo">
      <div>
        <h1>2026 Wolves U14-2 Girls stats</h1>
        <div class="subtitle">Wolves U14 Girls (Team 2)</div>
      </div>
    </div>
    <div class="nav-menu">
      <button id="menuToggle" class="menu-btn">☰</button>
      <div id="menuContent" class="menu-content" aria-hidden="true">
        <a class="menu-item current-page" href="#" data-view="boxscores">Boxscores</a>
        <a class="menu-item" href="#" data-view="stat-leaders">Stat Leaders</a>
        <a class="menu-item" href="#" data-view="averages-table">Averages (Table)</a>
        <a class="menu-item" href="#" data-view="averages-radar">Averages (Radar)</a>
        <a class="menu-item" href="#" data-view="analytics">Analytics</a>
      </div>
    </div>
  </div>

  <div id="view-boxscores" class="main-view active">
    <div id="gameHeader" class="card" style="display:none"></div>
    <div id="boxscore" class="card"><div class="loading">Loading boxscore & summary...</div></div>
    <div class="season-games" id="seasonGames" style="display:none">
      <span class="season-games-title">Season Fixture</span>
      <ul class="game-list" id="gameList">
        <li data-round="1">ROUND 1 - Rockingham Flames</li>
        <li data-round="2">ROUND 2 - Warwick Senators</li>
        <li data-round="3">ROUND 3 - SouthWest Slammers (Blue)</li>
        <li data-round="4">ROUND 4 - SouthWest Slammers (Red)</li>
        <li data-round="5">ROUND 5 - East Perth Eagles</li>
        <li data-round="6">ROUND 6 - Cockburn Cougars</li>
        <li data-round="7">ROUND 7 - Eastern Suns</li>
        <li data-round="8">ROUND 8 - Rockingham Flames</li>
        <li data-round="9">ROUND 9 - Warwick Senators</li>
        <li data-round="10">ROUND 10 - SouthWest Slammers (Blue)</li>
        <li data-round="11">ROUND 11 - SouthWest Slammers (Red)</li>
        <li data-round="12">ROUND 12 - East Perth Eagles</li>
        <li data-round="13">ROUND 13 - Cockburn Cougars</li>
        <li data-round="14">ROUND 14 - Eastern Suns</li>
        <li data-round="15">ROUND 15 - SouthWest Slammers (Blue)</li>
        <li data-round="16">ROUND 16 - Warwick Senators</li>
        <li data-round="17">QUARTER FINAL - Eastern Suns</li>
        <li data-round="18">SEMI FINAL - SouthWest Slammers (Red)</li>
        <li data-round="19" class="current">GRAND FINAL - SouthWest Slammers (Blue)</li>
      </ul>
    </div>
  </div>

  <div id="view-stat-leaders" class="main-view">
    <div id="statLeaders" class="card"><div class="loading">Loading stat leaders...</div></div>
  </div>

  <div id="view-averages-table" class="main-view">
    <div id="averagesTable" class="card"><div class="loading">Loading player averages...</div></div>
    <div id="definitionsAverages" class="card" style="max-width:820px;margin-top:6px">
      <div class="definition-title">Definitions</div>
      <div class="definitions">
        <strong>G</strong> - Games played<br/>
        <strong>PTS</strong> - Points per game<br/>
        <strong>REB</strong> - Rebounds per game<br/>
        <strong>AST</strong> - Assists per game<br/>
        <strong>STL</strong> - Steals per game<br/>
        <strong>BLK</strong> - Blocks per game<br/>
        <strong>TO</strong> - Turnovers per game<br/>
        <strong>PF</strong> - Personal fouls per game<br/>
        <strong>FG%</strong> - Field goal percentage<br/>
        <strong>3P%</strong> - 3-point percentage<br/>
        <strong>FT%</strong> - Free throw percentage<br/>
      </div>
    </div>
  </div>

  <div id="view-averages-radar" class="main-view">
    <div id="averagesRadar" class="card"><div class="loading">Loading radar chart...</div></div>
  </div>

  <div id="view-analytics" class="main-view">
    <div id="analyticsTable" class="card"><div class="loading">Loading analytics...</div></div>
    <div id="analyticsDefs" class="card" style="max-width:820px;margin-top:6px">
      <div class="definition-title">Analytics Definitions</div>
      <div class="definitions">
        <strong>PER</strong> - Player Efficiency Rating (per-minute efficiency estimate).<br/>
        <strong>TS%</strong> - True Shooting % (efficiency scoring metric).<br/>
        <strong>PPS</strong> - Points Per Shot (points divided by shooting attempts).<br/>
        <strong>A/T</strong> - Assist to Turnover ratio.<br/>
        <strong>OFF%</strong> - Offensive impact percentage (team possessions impact).<br/>
        <strong>DEF%</strong> - Defensive impact percentage.<br/>
      </div>
    </div>
  </div>

<script>
const sheetCSV = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRqOh5xyCZbHjcmDGOh8XHcXmLgilhO-XArsvjicJfDTJjNSS10OigMRLMDgBAdheLj1xcr2ud_JbsF/pub?output=csv";
const menuToggle = document.getElementById('menuToggle');
const menuContent = document.getElementById('menuContent');
menuToggle.addEventListener('click', ()=> menuContent.classList.toggle('show'));

document.querySelectorAll('.menu-item').forEach(item=>item.addEventListener('click', e=>{
  e.preventDefault();
  const view = e.currentTarget.dataset.view;
  document.querySelectorAll('.main-view').forEach(v=>v.classList.remove('active'));
  document.getElementById('view-'+view).classList.add('active');
  document.querySelectorAll('.menu-item').forEach(i=>i.classList.remove('current-page'));
  e.currentTarget.classList.add('current-page');
  menuContent.classList.remove('show');
}));

function parseCSV(text){
  const rows = [];
  let cur = '', inQuotes=false, row=[];
  for(let i=0;i<text.length;i++){
    const ch = text[i];
    if(ch === '"'){
      if(inQuotes && text[i+1] === '"'){ cur += '"'; i++; continue; }
      inQuotes = !inQuotes; continue;
    }
    if(ch === ',' && !inQuotes){ row.push(cur); cur=''; continue; }
    if((ch === '\n' || ch === '\r') && !inQuotes){
      if(cur !== '' || row.length>0){ row.push(cur); rows.push(row); row=[]; cur=''; }
      if(ch === '\r' && text[i+1] === '\n'){ i++; }
      continue;
    }
    cur += ch;
  }
  if(cur !== '' || row.length>0){ row.push(cur); rows.push(row); }
  return rows.map(r=> r.map(c=> c.trim()));
}

function findSection(rows,titleStart){
  for(let i=0;i<rows.length;i++){
    if(rows[i][0] && rows[i][0].toString().toLowerCase().startsWith(titleStart.toLowerCase())) return i;
  }
  return -1;
}

function extractTable(rows,startIndex){
  // find header row after startIndex
  let headerRow=-1;
  for(let i=startIndex+1;i<rows.length;i++){
    const r = rows[i].map(c=>c.toString().toLowerCase());
    if(r.includes('player') || r.includes('pts') || r.includes('g')){ headerRow=i; break; }
    if(r.join('').trim()==='') continue;
  }
  if(headerRow===-1) return null;
  const headers = rows[headerRow].filter(h=> h !== '');
  const data=[];
  for(let j=headerRow+1;j<rows.length;j++){
    const r = rows[j];
    if(!r || r.join('').trim()==='') break;
    if(r[0] && (r[0].toString().toLowerCase().includes('analytics') || r[0].toString().toLowerCase().includes('season totals') || r[0].toString().toLowerCase().includes('team totals'))) break;
    const rowVals=[];
    for(let k=0;k<headers.length;k++) rowVals.push(r[k] ?? '');
    data.push(rowVals);
  }
  return {headers,data};
}

function buildTableHTML(headers,data,options={}){
  const includeIndex = options.index || false;
  let html = '<table><thead><tr>';
  if(includeIndex) html += '<th class="num-cell">#</th>';
  headers.forEach(h=> html += `<th>${h}</th>`);
  html += '</tr></thead><tbody>';
  data.forEach((r,ri)=>{
    html += '<tr>';
    if(includeIndex) html += `<td class="num-cell">${ri+1}</td>`;
    for(let i=0;i<headers.length;i++){
      html += `<td>${r[i] ?? ''}</td>`;
    }
    html += '</tr>';
  });
  html += '</tbody></table>';
  return html;
}

fetch(sheetCSV).then(r=>r.text()).then(txt=>{
  const rows = parseCSV(txt);

  const idxA = findSection(rows,'Season Averages');
  const idxT = findSection(rows,'Season Totals');
  const idxAn = findSection(rows,'Analytics');

  // Averages
  if(idxA >= 0){
    const tbl = extractTable(rows, idxA);
    if(tbl){
      document.getElementById('averagesTable').innerHTML = '<h3>Season Averages</h3>' + buildTableHTML(tbl.headers, tbl.data, {index:false});
    } else {
      document.getElementById('averagesTable').innerHTML = '<div class="loading">Season Averages not found.</div>';
    }
  } else {
    document.getElementById('averagesTable').innerHTML = '<div class="loading">Season Averages section not found in sheet.</div>';
  }

  // Season Totals -> Boxscores summary (render team totals and avg rows visible)
  if(idxT >= 0){
    const tblT = extractTable(rows, idxT);
    if(tblT){
      // look for TEAM TOTALS / TEAM AVG rows within data (by starting cell)
      let teamRow=null, teamAvgRow=null;
      const body = tblT.data.slice();
      // detect rows that start with TEAM or TEAM TOTALS / TEAM AVG PER GAME
      for(let i=body.length-1;i>=0;i--){
        const first = (body[i][0] || '').toString().toLowerCase();
        if(!teamRow && first.startsWith('team')){ teamRow = body.splice(i,1)[0]; continue; }
        if(!teamAvgRow && first.includes('avg')){ teamAvgRow = body.splice(i,1)[0]; continue; }
      }
      // build table with remaining player rows and then append totals
      let html = '<h3 style="margin-top:0">Season Totals</h3>';
      html += buildTableHTML(tblT.headers, body, {index:false});
      if(teamRow){
        html += '<div style="margin-top:8px">' + '<table><tbody><tr class="totals-row">';
        teamRow.forEach(c=> html += `<td>${c}</td>`);
        html += '</tr></tbody></table></div>';
      }
      if(teamAvgRow){
        html += '<div style="margin-top:6px">' + '<table><tbody><tr class="totals-row">';
        teamAvgRow.forEach(c=> html += `<td>${c}</td>`);
        html += '</tr></tbody></table></div>';
      }
      document.getElementById('boxscore').innerHTML = html;
      document.getElementById('seasonGames').style.display = 'block';
    } else {
      document.getElementById('boxscore').innerHTML = '<div class="loading">Season Totals table not found.</div>';
    }
  } else {
    document.getElementById('boxscore').innerHTML = '<div class="loading">Season Totals section not found in sheet.</div>';
  }

  // Analytics
  if(idxAn >= 0){
    const tblAn = extractTable(rows, idxAn);
    if(tblAn){
      // map common header names to desired analytics columns
      const headersLower = tblAn.headers.map(h=>h.toString().toLowerCase());
      const desired = ['player','per','ts%','pps','a/t','off%','def%'];
      const mapIdx = desired.map(d=>{
        const i = headersLower.indexOf(d);
        return i>=0?i:-1;
      });
      // if not direct names, try fuzzy
      if(mapIdx.every(i=>i===-1)){
        // attempt to guess by partial matches
        mapIdx.forEach((v,ii)=>{
          if(v===-1){
            for(let h=0;h<headersLower.length;h++){
              if(headersLower[h].includes(desired[ii].replace('%','')) || headersLower[h].includes(desired[ii].replace('/',''))){
                mapIdx[ii]=h; break;
              }
            }
          }
        });
      }
      // build rowsOut with desired order
      const rowsOut = tblAn.data.map(r=> desired.map((d,ci)=>{
        const idx = mapIdx[ci];
        return idx>=0? (r[idx] ?? '') : '';
      }));
      // detect TEAM MEDIAN row
      let median = null;
      if(rowsOut.length>0){
        const last = (rowsOut[rowsOut.length-1][0] || '').toString().toLowerCase();
        if(last.startsWith('team')) median = rowsOut.pop();
      }
      // build analytics table
      let html = '<h3 style="margin-top:0">Player Analytics</h3>';
      html += '<table><thead><tr><th>#</th><th>Player</th><th>PER</th><th>TS%</th><th>PPS</th><th>A/T</th><th>OFF%</th><th>DEF%</th></tr></thead><tbody>';
      rowsOut.forEach((r,ri)=>{
        html += '<tr>';
        html += `<td class="num-cell">${ri+1}</td>`;
        r.forEach(c=> html += `<td>${c}</td>`);
        html += '</tr>';
      });
      if(median){
        html += '<tr class="totals-row">';
        html += '<td></td>';
        median.forEach(c=> html += `<td>${c}</td>`);
        html += '</tr>';
      }
      html += '</tbody></table>';
      document.getElementById('analyticsTable').innerHTML = html;
    } else {
      document.getElementById('analyticsTable').innerHTML = '<div class="loading">Analytics table not found.</div>';
    }
  } else {
    document.getElementById('analyticsTable').innerHTML = '<div class="loading">Analytics section not found in sheet.</div>';
  }

  // Stat leaders - top 5 by PTS from averages
  try{
    if(idxA >= 0){
      const tbl = extractTable(rows, idxA);
      if(tbl){
        const low = tbl.headers.map(h=>h.toString().toLowerCase());
        const ptsI = low.indexOf('pts');
        const playerI = low.indexOf('player');
        if(ptsI>=0 && playerI>=0){
          const sorted = tbl.data.slice().sort((a,b)=> parseFloat(b[ptsI]||0) - parseFloat(a[ptsI]||0));
          const top = sorted.slice(0,6);
          let html = '<h3 style="margin-top:0">Stat Leaders</h3>';
          html += '<table><thead><tr><th>Rank</th><th>Player</th><th>PTS</th></tr></thead><tbody>';
          top.forEach((r,i)=> html += `<tr><td>${i+1}</td><td>${r[playerI]}</td><td>${r[ptsI]}</td></tr>`);
          html += '</tbody></table>';
          document.getElementById('statLeaders').innerHTML = html;
        } else {
          document.getElementById('statLeaders').innerHTML = '<div class="loading">Stat leaders not available (PTS column missing).</div>';
        }
      }
    }
  }catch(e){
    document.getElementById('statLeaders').innerHTML = '<div class="loading">Error computing stat leaders.</div>';
  }

}).catch(err=>{
  document.getElementById('boxscore').innerHTML = '<div class="loading">Error fetching sheet — ensure it is published to the web.</div>';
  document.getElementById('averagesTable').innerHTML = '<div class="loading"></div>';
  document.getElementById('analyticsTable').innerHTML = '<div class="loading"></div>';
  document.getElementById('statLeaders').innerHTML = '<div class="loading"></div>';
});
</script>
</body>
</html>
